# Required: HACS integration (https://hacs.xyz/)
# Required: lovelace-mushroom (https://github.com/piitaya/lovelace-mushroom)
# Required: stack-in-card (https://github.com/custom-cards/stack-in-card)
#
# Replace <EV_BATTERY_LEVEL> with the entity_id of the ev battery level sensor or emulated entity_id from this script.
type: custom:stack-in-card
mode: vertical
cards:
  - type: custom:mushroom-title-card
    title: "{{ states.sensor.ev_current_charging_rule.state }}"
    alignment: center
  - type: conditional
    conditions:
      - condition: numeric_state
        entity: <EV_BATTERY_LEVEL>
        below: input_number.ev_min_daily_battery_level
      - condition: state
        entity: <EV_BATTERY_LEVEL>
        state_not: "0.0"
    card:
      type: custom:mushroom-entity-card
      entity: input_boolean.ev_forced_charging_daily_battery_level
  - type: markdown
    content: "{{ states.sensor.ev_charging_history.attributes.history }}"
view_layout:
  position: sidebar
